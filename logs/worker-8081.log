mkdir -p pkg/rpc
Generating protobuf code...
protoc --proto_path=pkg/rpc \
	--go_out=. --go_opt=module=no.cap/goddb  \
	--go-grpc_out=. --go-grpc_opt=module=no.cap/goddb  \
	pkg/rpc/dynamo.proto
Protobuf code generated successfully.
mkdir -p bin
go build -o bin/worker cmd/worker/main.go
bin/worker -port 8081 -redisport 63080 -discovery 63179
2025/04/15 22:26:11 discovery started
2025/04/15 22:26:11 Node localhost:8081 registered with discovery service
2025/04/15 22:26:11 nodeKeys: [node:localhost:8080 node:localhost:8081]
2025/04/15 22:26:11 Added node localhost:8080 from discovery service
2025/04/15 22:26:11 Added node localhost:8081 from discovery service
2025/04/15 22:26:11 Node localhost:8081 initialized with 2 nodes from discovery service
2025/04/15 22:26:11 Starting gossip protocol (interval: 10s, peers per round: 2)
2025/04/15 22:26:11 server listening at 127.0.0.1:8081
2025/04/15 22:26:11 replication factor: 3, write quorum: 3, read quorum: 3
2025/04/15 22:26:11 discovery Redis: 63179
2025/04/15 22:26:11 Node localhost:8081 starting gossip loop (interval: 10s, peers per round: 2)
2025/04/15 22:26:21 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:26:21 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:26:24 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:26:24 Node localhost:8081: Adding new node localhost:8082 to ring from gossip
2025/04/15 22:26:24 Node localhost:8081: Updated ring based on gossip. New version: 2
2025/04/15 22:26:24 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:24 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:26:29 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:26:29 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:29 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:26:31 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:26:31 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:26:31 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:26:31 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:26:34 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:26:34 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:34 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:26:39 Node localhost:8081: Received ReplicatePut request for key 'x'
2025/04/15 22:26:39 Node localhost:8081: Successfully stored replicated key 'x'
2025/04/15 22:26:39 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:26:39 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:39 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:26:41 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:26:41 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:26:41 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:26:41 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:26:44 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:26:44 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:44 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:26:49 Node localhost:8081: Received ReplicatePut request for key 'y'
2025/04/15 22:26:49 Node localhost:8081: Successfully stored replicated key 'y'
2025/04/15 22:26:49 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:26:49 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:49 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:26:51 Node localhost:8081: Received ReplicatePut request for key 'z'
2025/04/15 22:26:51 Node localhost:8081: Successfully stored replicated key 'z'
2025/04/15 22:26:51 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:26:51 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:26:51 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:26:51 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:26:54 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:26:54 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:54 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:26:56 Node localhost:8081: Received ReplicatePut request for key 'y'
2025/04/15 22:26:56 Node localhost:8081: Successfully stored replicated key 'y'
2025/04/15 22:26:59 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:26:59 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:26:59 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:27:01 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:27:01 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:27:01 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:27:01 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:27:04 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:27:04 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:04 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:27:09 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:27:09 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:09 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:27:11 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:27:11 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:27:11 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:27:11 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:27:14 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:27:14 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:14 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:27:19 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:27:19 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:19 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:27:21 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:27:21 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:27:21 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:27:21 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:27:24 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:27:24 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:24 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:27:29 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:27:29 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:29 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:27:31 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:27:31 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:27:31 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:27:31 Node localhost:8081: No updates from peer localhost:8082
2025/04/15 22:27:34 Node localhost:8081: Received gossip from node localhost:8082
2025/04/15 22:27:34 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:34 Node localhost:8081: Sending 0 updated node states to localhost:8082
2025/04/15 22:27:39 Node localhost:8081: Received gossip from node localhost:8080
2025/04/15 22:27:39 Node localhost:8081: Ring after gossip: &{{{{} {0 0}} 0 0 {{} 0} {{} 0}} [544b0204d642d996a1a342762d3adadf 9f5ffc7a10e0bad054458b089947ce2f cfe993016aed204bcee51e6f37a3657c] map[544b0204d642d996a1a342762d3adadf:{{{} [] [] <nil>} localhost:8081 localhost 8081 1 [] 0} 9f5ffc7a10e0bad054458b089947ce2f:{{{} [] [] <nil>} localhost:8080 localhost 8080 1 [] 0} cfe993016aed204bcee51e6f37a3657c:{{{} [] [] <nil>} localhost:8082 localhost 8082 1 [] 0}]}
2025/04/15 22:27:39 Node localhost:8081: Sending 0 updated node states to localhost:8080
2025/04/15 22:27:41 Node localhost:8081: Gossiping with peer localhost:8080
2025/04/15 22:27:41 Node localhost:8081: Gossiping with peer localhost:8082
2025/04/15 22:27:41 Node localhost:8081: No updates from peer localhost:8080
2025/04/15 22:27:41 Node localhost:8081: No updates from peer localhost:8082
